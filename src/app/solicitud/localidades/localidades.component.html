<style>
    .register_list .register .cel#statuslabel {
        text-align: right;
        vertical-align: middle;
        width: 200px !important;
        padding-left: 0% !important;
    }
</style>
<div class="skeleton slst animate__animated animate__fadeIn" *ngIf="loading">
    <h3 class="color-accent">Estamos procesando su solicitud. Por favor, espere...</h3>
    <div class="tpln clm2 fd">
        <div><span class="sqr"></span></div>
        <div><span class="rnd"></span><span class="ln"></span><span class="rnd"></span>
        </div>
    </div>
    <div class="lst fd">
        <div class="sqr wd mhg wvs pst"></div>
        <div class="sqr wd mhg wvs pst"></div>
        <div class="sqr wd mhg wvs pst"></div>
    </div>
</div>


<div class="add-choices" *ngIf="Registrado == false">

    <div class="block" (click)="Nuevasolicitud()" *ngIf="this.details2.solicitud_Estado_Numero ==0">
        <h4><i class="fas fa-edit"></i>Agregar Localidades Medicas </h4>
        <span>Registre los datos relacionados donde el Profesonal de salud presta servicio.</span>
    </div>
</div>

<div class="yellow-alert" *ngIf="this.RechazoParcial && motivos_Rechazo.length  > 0">
    <div class="content">
        <div class="form-field">
            Existen datos que deben revisarse en la solicitud. Para corregir
            estos errores presione el botón
            <strong>"editar registro <i class="fas fa-edit"></i>"</strong> que se encuentra en el recuadro del título
            registrado.
        </div>
        <div style="margin-bottom: 15px;" *ngFor="let motivo of motivos_Rechazos_Agrupados | keyvalue">
            <strong class="caption">Licencia No: {{ motivo.key }} </strong>
            <ul>
                <li class="color-red" *ngFor="let item of motivo.value">
                    {{item.motivo_Rechazo_Descripcion}}
                </li>
            </ul>

            <div *ngIf="motivo.value[0]?.notaEvaluador">
                <strong>Nota: </strong>
                <p>{{motivo.value[0].notaEvaluador}}</p>
            </div>
        </div>

        <div>
            <p>
                <strong><i class="fas fa-exclamation-circle"></i> IMPORTANTE: Cuando haga los ajustes correspondientes.
                    Favor
                    diríjase a la pestaña “Someter Solicitud” ubicado a la izquierda, para registrar (enviar a SISALRIL)
                    la
                    solicitud.</strong>
            </p>
        </div>

    </div>
</div>

<br>
<div class="row">
    <div class="col-w9">
        <div class="register_list">

            @for (item of listadoDto; track $index) {
            <div class="register animate__animated animate__fadeIn list">
                <div class="cel ">
                    <strong class="title">
                        Localidad Nombre : {{item.localidad_Prestadora_Nombre}}
                        <!-- {{listado.enfermedad_Padecimiento}} - {{listado.tipodelicencia}} -->

                    </strong>


                    <span class="title">
                        Municipio : {{BuscarMunicipio(item.municipio_Numero)}}

                        <!-- ({{item.municipio_Numero}}) -->
                    </span>


                    <div class="relates">
                        <span><i class="far fa-calendar"></i> Prestadora Número : {{item.prestadora_Numero}} </span>

                        <span><i class="far fa-calendar"></i> Fecha Registro: {{item.registro_Fecha |
                            date:'dd/MM/yyyy'}} </span>

                        <span>
                            <i class="far fa-calendar"></i> Estatus Solicitud: {{item.registro_Estado}}</span>
                    </div>
                </div>

                <!-- <div class="cel" id="btns">
                    <button class="outline-btn icon tooltip  open-modal" data-tooltip="Ver Detalle"
                        data-target="Detail_form">
                        <i class="fas fa-eye"></i>
                    </button>
                </div> -->
                <div class="cel" id="btns" *ngIf="this.details2.solicitud_Estado_Numero ==0">
                    <button class="outline-btn icon edit tooltip open-modal" data-target="edit_localidades"
                        data-tooltip="Editar registro" (click)="ediarRegistro(item)">
                        <i class="fas fa-edit"></i>
                    </button>
                </div>


            </div>
            }

        </div>


    </div>

    <div class="col-w3 info-section">
        <div class="block m-top" *ngIf="Registrado == true">
            <h4>Acciones</h4>
            <div class="form-field">
                <button class="default-btn rounded " (click)="Nuevasolicitud()">

                    <i class="fas fa-edit"></i> Agregar Localidad
                </button>
            </div>

        </div>

    </div>


    <div id="edit_localidades" class="modal-wrap">
        <div class="modalbox medium">
            <div class="modal-header">
                <h2><i class="fas fa-pen"></i> Editar Localidad : {{ editar?.localidad_Prestadora_Nombre}}</h2>
                <button class="close-btn dismiss"><i class="fas fa-times"></i></button>
            </div>

            <form action="" [formGroup]="registroLocalidades">
                <div class="modal-body-content">
                    <div class="form-field">
                        <div>

                        </div>


                        <div class="form-field">

                            <strong class="caption">Municipio <span class="required-field">*</span>:

                            </strong>

                            <div class="form-control">

                                <ng-select [items]="listaMunicipio" placeholder="Selecione un ... "
                                    formControlName="municipio_numero" bindLabel="municipioNombre"
                                    bindValue="municipioNumero" [clearable]="false" [searchable]="false"
                                    [(ngModel)]="selectedMunicipio">
                                </ng-select>
                            </div>
                        </div>
                        <div class="form-field">

                            <strong class="caption">Dirección <span class="required-field">*</span>:

                            </strong>

                            <input type="text" class="input form-input" formControlName="localidad_Direccion">

                        </div>

                        <div class="form-field">

                            <strong class="caption">Teléfono 1 <span class="required-field">*</span>:

                            </strong>

                            <div class="form-control">

                                <input type="text" class="input form-input" formControlName="localidad_Telefono1"
                                    mask="(000) 000-0000">

                            </div>
                        </div>
                        <div class="form-field">

                            <strong class="caption">Teléfono 2 :

                            </strong>

                            <div class="form-control">

                                <input type="text" class="input form-input" formControlName="localidad_Telefono2"
                                    mask="(000) 000-0000">

                            </div>
                        </div>
                        <div class="form-field">

                            <strong class="caption">Detalles :

                            </strong>

                            <div class="form-control">

                                <input type="text" class="input form-input" formControlName="localidad_Detalle">

                            </div>
                        </div>
                        <div class="modal-footer right">
                            <button type="button" class="default-btn rounded lg-btn dismiss" id="btnLCancel"
                                (click)="Cancelar()" name="btnLCancel"><i class="fas fa-times"></i> Cancelar</button>
                            <button type="button" class="primary-btn rounded lg-btn" (click)="guardarSolicitud()"><i
                                    class="fas fa-check"></i>
                                Guardar cambios</button>

                        </div>
                    </div>
                </div>
            </form>
        </div>




    </div>